# 手机相册管理工具

## 功能说明

这个工具可以帮你管理手机相册中的图片，支持以下功能：

1. **传输图片到手机**：将指定文件夹的图片传输到手机相册
2. **删除手机图片**：删除手机相册中指定文件夹的图片
3. **列出文件夹**：查看手机相册中的数字文件夹

## 前置要求

### 1. 安装ADB工具
- 下载并安装 [Android SDK Platform Tools](https://developer.android.com/studio/releases/platform-tools)
- 将ADB添加到系统环境变量PATH中
- 或者将 `adb.exe` 放在脚本同目录下

### 2. 手机设置
- 开启开发者选项
- 开启USB调试
- 连接手机到电脑
- 允许USB调试授权

### 3. 文件夹命名规则
- 只支持纯数字文件夹名称
- 例如：`1`, `123`, `20250915` ✅
- 例如：`test`, `abc`, `1a` ❌

## 使用方法

### 1. 传输图片到手机

```bash
# 将文件夹中的图片传输到手机相册
python phone_manager.py transfer ./xiaoshani/20250915/output/


# 示例：将 20250915 文件夹的图片传输到手机
python phone_manager.py transfer D:\images\20250915
```

**传输过程：**
1. 检查ADB连接
2. 验证文件夹名称（只支持数字）
3. 扫描文件夹中的图片文件
4. 在手机相册中创建对应文件夹
5. 逐个传输图片文件
6. 刷新手机相册

### 2. 删除手机相册中的图片

```bash
# 删除手机相册中指定文件夹的所有图片
python phone_manager.py delete ./xiaoshani/20250915/output/

# 示例：删除手机相册中名为 "123" 的文件夹
python phone_manager.py delete 123
```

**删除过程：**
1. 检查ADB连接
2. 验证文件夹名称（只支持数字）
3. 列出文件夹中的图片文件
4. 确认删除操作
5. 逐个删除图片文件
6. 删除空文件夹
7. 刷新手机相册

### 3. 列出手机相册中的数字文件夹

```bash
# 查看手机相册中的所有数字文件夹
python phone_manager.py list
```

## 支持的图片格式

- JPG/JPEG
- PNG
- BMP
- GIF
- WEBP

## 使用示例

### 示例1：传输图片
```bash
# 假设你有以下文件夹结构：
# D:\images\
#   ├── 1\          # 包含图片1.jpg, 1.png 等
#   ├── 2\          # 包含图片2.jpg, 2.png 等
#   └── 20250915\   # 包含图片3.jpg, 3.png 等

# 传输文件夹1的图片到手机
python phone_manager.py transfer D:\images\1

# 传输文件夹20250915的图片到手机
python phone_manager.py transfer D:\images\20250915
```

### 示例2：删除手机图片
```bash
# 删除手机相册中名为"1"的文件夹
python phone_manager.py delete 1

# 删除手机相册中名为"20250915"的文件夹
python phone_manager.py delete 20250915
```

### 示例3：查看手机文件夹
```bash
# 查看手机相册中的所有数字文件夹
python phone_manager.py list
```

## 输出说明

### 传输成功示例
```
✅ 检测到 1 个设备已连接
📁 找到 5 张图片
✅ 在手机相册中创建文件夹: 20250915
📤 传输第 1/5 张: 1.jpg
   ✅ 传输成功
📤 传输第 2/5 张: 2.jpg
   ✅ 传输成功
...
🎉 传输完成！成功传输 5/5 张图片
📱 已刷新手机相册
```

### 删除成功示例
```
✅ 检测到 1 个设备已连接
📁 找到 3 张图片需要删除
⚠️  确定要删除手机相册中文件夹 '20250915' 的所有图片吗？(y/N): y
🗑️  删除第 1/3 张: 1.jpg
   ✅ 删除成功
...
🎉 删除完成！成功删除 3/3 张图片
📁 已删除空文件夹: 20250915
📱 已刷新手机相册
```

## 注意事项

1. **文件夹名称限制**：只支持纯数字，不支持字母或特殊字符
2. **ADB连接**：确保手机已连接并授权USB调试
3. **权限问题**：某些手机可能需要额外的存储权限
4. **文件覆盖**：传输时会覆盖同名的图片文件
5. **删除确认**：删除操作需要手动确认，避免误删

## 故障排除

### 1. ADB连接失败
```
❌ 未找到ADB命令，请确保已安装Android SDK并配置环境变量
```
**解决方案：**
- 安装Android SDK Platform Tools
- 将ADB添加到系统PATH
- 或下载adb.exe放在脚本目录

### 2. 设备未连接
```
❌ 没有检测到已连接的设备
```
**解决方案：**
- 检查USB连接
- 开启USB调试
- 授权USB调试
- 检查USB驱动

### 3. 文件夹名称错误
```
❌ 文件夹名称 'test' 不符合要求，只支持数字
```
**解决方案：**
- 将文件夹重命名为纯数字
- 例如：`test` → `1`

### 4. 传输失败
```
❌ 传输失败: Permission denied
```
**解决方案：**
- 检查手机存储权限
- 尝试重启ADB服务
- 检查手机存储空间

## 技术实现

- **ADB命令**：使用Android Debug Bridge进行文件操作
- **文件传输**：`adb push` 命令传输文件
- **文件删除**：`adb shell rm` 命令删除文件
- **相册刷新**：`am broadcast` 命令刷新媒体库
- **文件夹管理**：`mkdir` 和 `rmdir` 命令管理文件夹

## 更新日志

- v1.0.0: 初始版本，支持图片传输和删除功能
